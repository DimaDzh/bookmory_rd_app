# Bookmory - Book Management System

–í–µ–±-–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ—é –±—ñ–±–ª—ñ–æ—Ç–µ–∫–æ—é –∫–Ω–∏–≥ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é –ø–æ—à—É–∫—É, –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó –∫–Ω–∏–∂–∫–æ–≤–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π.

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

- **Frontend**: Next.js 15 –∑ React 19, TypeScript, Tailwind CSS
- **Backend**: NestJS –∑ TypeScript
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: PostgreSQL –∑ Prisma ORM
- **–ö–µ—à—É–≤–∞–Ω–Ω—è**: Redis
- **–ë–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è**: Nginx
- **–Ü–Ω—Ç–µ—Ä–Ω–∞—Ü—ñ–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è**: –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó —Ç–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤

## üöÄ –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- Node.js 18+ —Ç–∞ pnpm
- PostgreSQL 15+
- Redis 7+

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
‚îú‚îÄ‚îÄ client/              # Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/        # App Router —Å—Ç–æ—Ä—ñ–Ω–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/ # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contexts/   # React –∫–æ–Ω—Ç–µ–∫—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/        # –£—Ç–∏–ª—ñ—Ç–∏ —Ç–∞ API –∫–ª—ñ—î–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ types/      # TypeScript —Ç–∏–ø–∏
‚îÇ   ‚îî‚îÄ‚îÄ dictionaries/   # –§–∞–π–ª–∏ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ server/             # NestJS –±–µ–∫–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/       # –ú–æ–¥—É–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ books/      # –ú–æ–¥—É–ª—å –∫–Ω–∏–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/      # –ú–æ–¥—É–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user-books/ # –ú–æ–¥—É–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –∫–Ω–∏–≥
‚îÇ   ‚îî‚îÄ‚îÄ prisma/         # –°—Ö–µ–º–∞ —Ç–∞ –º—ñ–≥—Ä–∞—Ü—ñ—ó –ë–î
‚îî‚îÄ‚îÄ load-balancer/      # Nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
git clone --recurse-submodules git@github.com:DimaDzh/bookmory_rd_app.git

cd bookmory_rd_app
```

### –ü—Ä–æ–¥–∞–∫—à–Ω –∑–±—ñ—Ä–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose -f docker-compose.prod.yml up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose -f docker-compose.prod.yml logs -f

# –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤
docker-compose -f docker-compose.prod.yml down
```

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É:

- –ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫: http://localhost:8080
- API: http://localhost:8080/api

### –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –ü–µ—Ä–µ—Å–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—ñ–≤
docker-compose -f docker-compose.prod.yml build --no-cache

# –ó–∞–ø—É—Å–∫ –º—ñ–≥—Ä–∞—Ü—ñ–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ
docker-compose -f docker-compose.prod.yml exec server npx prisma migrate deploy

# –ü–µ—Ä–µ–≥–ª—è–¥ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
docker-compose -f docker-compose.prod.yml exec db psql -U bookmory -d bookmory_db
```

## üîß –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### Backend

| –ó–º—ñ–Ω–Ω–∞           | –û–ø–∏—Å                          | –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º |
| ---------------- | ----------------------------- | ---------------- |
| `NODE_ENV`       | –†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏                  | `development`    |
| `PORT`           | –ü–æ—Ä—Ç –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞              | `3030`           |
| `DATABASE_URL`   | URL –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ PostgreSQL | -                |
| `JWT_SECRET`     | –°–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –¥–ª—è JWT        | -                |
| `JWT_EXPIRES_IN` | –ß–∞—Å –¥—ñ—ó —Ç–æ–∫–µ–Ω–∞                | `7d`             |
| `REDIS_URL`      | URL –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Redis      | -                |

### Frontend

| –ó–º—ñ–Ω–Ω–∞                | –û–ø–∏—Å           | –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º            |
| --------------------- | -------------- | --------------------------- |
| `NEXT_PUBLIC_API_URL` | URL –±–µ–∫–µ–Ω–¥ API | `http://localhost:3030/api` |
| `NODE_ENV`            | –†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏   | `development`               |

## üìö API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

```
POST /api/auth/register     - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
POST /api/auth/login        - –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
GET  /api/auth/profile      - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
GET  /api/auth/validate     - –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞
```

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ

```
POST   /api/users           - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∞–¥–º—ñ–Ω)
GET    /api/users           - –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–∞–¥–º—ñ–Ω)
GET    /api/users/me        - –ü—Ä–æ—Ñ—ñ–ª—å –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
GET    /api/users/:id       - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞ ID
PATCH  /api/users/me        - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é
PATCH  /api/users/:id       - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∞–¥–º—ñ–Ω)
DELETE /api/users/:id       - –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–∞–¥–º—ñ–Ω)
```

### –ö–Ω–∏–≥–∏

```
GET /api/books/search       - –ü–æ—à—É–∫ –∫–Ω–∏–≥ —á–µ—Ä–µ–∑ Google Books API
GET /api/books/:id          - –î–µ—Ç–∞–ª—ñ –∫–Ω–∏–≥–∏ –∑–∞ ID
```

### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –∫–Ω–∏–≥–∏

```
POST   /api/user-books              - –î–æ–¥–∞–Ω–Ω—è –∫–Ω–∏–≥–∏ –¥–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
GET    /api/user-books              - –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
GET    /api/user-books/:bookId      - –î–µ—Ç–∞–ª—ñ –∫–Ω–∏–≥–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
PATCH  /api/user-books/:bookId/progress  - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É
DELETE /api/user-books/:bookId      - –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—ñ–≤

#### GET /api/books/search

```
?q=<–ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç>&limit=<–∫—ñ–ª—å–∫—ñ—Å—Ç—å>&page=<—Å—Ç–æ—Ä—ñ–Ω–∫–∞>
```

#### GET /api/user-books

```
?status=<—Å—Ç–∞—Ç—É—Å>&favorite=<true/false>&limit=<–∫—ñ–ª—å–∫—ñ—Å—Ç—å>&page=<—Å—Ç–æ—Ä—ñ–Ω–∫–∞>
```

### –°—Ç–∞—Ç—É—Å–∏ –∫–Ω–∏–≥

- `WANT_TO_READ` - –•–æ—á—É –ø—Ä–æ—á–∏—Ç–∞—Ç–∏
- `READING` - –ß–∏—Ç–∞—é –∑–∞—Ä–∞–∑
- `FINISHED` - –ü—Ä–æ—á–∏—Ç–∞–Ω–æ
- `PAUSED` - –í—ñ–¥–∫–ª–∞–¥–µ–Ω–æ
- `DNF` - –ù–µ –¥–æ—á–∏—Ç–∞–≤

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

–°–∏—Å—Ç–µ–º–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î JWT —Ç–æ–∫–µ–Ω–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó. –¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏:

```
Authorization: Bearer <jwt-token>
```

## üõ†Ô∏è –†–æ–∑—Ä–æ–±–∫–∞

### –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è Prisma –∫–ª—ñ—î–Ω—Ç–∞
cd server && npx prisma generate

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó
cd server && npx prisma migrate dev --name <–Ω–∞–∑–≤–∞-–º—ñ–≥—Ä–∞—Ü—ñ—ó>

# –ü–µ—Ä–µ–≥–ª—è–¥ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
cd server && npx prisma studio

# –õ—ñ–Ω—Ç–∏–Ω–≥
cd client && pnpm run lint
cd server && pnpm run lint

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
cd server && pnpm run test
```
